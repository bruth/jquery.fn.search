var __slice=Array.prototype.slice;(function(a){return typeof exports=="object"?a(require("jquery")):typeof define=="function"&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return b="jquery.fn.search",p=Object.prototype.toString,h=a.isArray,i=a.isFunction,j=function(a){return a===Object(a)},k=function(a){return p.call(a)==="[object RegExp]"},l=function(a){return p.call(a)==="[object String]"},d={text:function(b,c){return a(this).text().search(c)>=0}},c={highlight:{on:function(a,b,c,d,e){var g,i,j,k,l;if(c){g=a,e.filterOn&&(g=a.find(e.filterOn));if(h(c)){l=[];for(j=0,k=c.length;j<k;j++)i=c[j],l.push(f(g,i,e.highlightClass));return l}return f(g,c,e.highlightClass)}},off:function(a,b,c,d,e){var f;if(c)return f=a,e.filterOn&&(f=a.find(e.filterOn)),n(f,e.highlightClass)}},fade:{on:function(b,c,d,e,f){var g;return c.css({opacity:f.fadeOpacity}),g=this.parent(),b.each(function(b){return a(this).parentsUntil(g).css({opacity:1})})},off:function(){return this.css({opacity:1})}},hide:{on:function(b,c){var d;return c.hide(),d=this.parent(),b.each(function(b){return a(this).parentsUntil(d).show()})},off:function(){return this.show()}}},g=function(a,b,c,d){var e,f,h,i,j,k,l,m;l=0;if(a.nodeType===3)k=a.data.search(c),k>=0&&a.data.length>0&&(h=a.data.match(c),m=document.createElement("span"),m.className=d,i=a.splitText(k),e=i.splitText(h[0].length),j=i.cloneNode(!0),m.appendChild(j),i.parentNode.replaceChild(m,i),l=1);else if(a.nodeType===1&&a.childNodes&&!/(script|style)/i.test(a.tagName)){f=0;while(f<a.childNodes.length)f+=g(a.childNodes[f],b,c,d),f++}return l},f=function(a,b,c){var d;return d=new RegExp(b,"i"),a.each(function(){return g(this,b,d,c)})},n=function(a,b){return a.find("span."+b).each(function(){var a;return a=this.parentNode,a.replaceChild(this.firstChild,this),a.normalize()}).end()},e={filter:"text",effect:["fade","highlight"],fadeOpacity:.3,highlightClass:"highlight",filterOn:null},o=function(f,g){var k,m,n,o,p,q;g==null&&(g={}),g=a.extend({},e,g),o=g.filter,m=g.effect;if(l(o)&&d[o])o=d[o];else if(!i(o))throw new TypeError(""+o+" is an unsupported filter");if(l(m=g.effect)&&c[m])m=c[m];else if(h(m)){n=[];for(p=0,q=m.length;p<q;p++){k=m[p];if(l(k)&&c[k])n.push(c[k]);else{if(!j(k))throw new TypeError(""+k+" is an unsupported effect");n.push(k)}}m={on:function(){var a,b,c,d;a=1<=arguments.length?__slice.call(arguments,0):[];for(c=0,d=n.length;c<d;c++)b=n[c],b.on.apply(this,a)},off:function(){var a,b,c,d;a=1<=arguments.length?__slice.call(arguments,0):[];for(c=0,d=n.length;c<d;c++)b=n[c],b.off.apply(this,a)}}}else if(!j(m))throw new TypeError(""+m+" is an unsupported effect");return f.data(b,{hits:a(),misses:a(),options:g,filter:o,effect:m})},m=function(b,c,d,e){var f,g,h;return f=e.hits,g=e.misses,h=e.options,e.effect&&e.prevPattern&&e.effect.off.call(b,f,g,e.prevPattern,e.prevRegexp,h),e.prevPattern=c,e.prevRegexp=d,c?(f=b.filter(function(b){var f;return f=this,h.filterOn&&(f=a(f).find(h.filterOn)),e.filter.call(f,c,d,b)}),g=b.not(f),e.effect&&e.effect.on.call(b,f,g,c,d,h)):(f=a(),g=a()),e.hits=f,e.misses=g},a.fn.search=function(a,c){var d;if(l(a)||h(a))(d=this.data(b))||o(this),c||(c=new RegExp(l(a)?a:a.join("|"),"i")),m(this,a,c,d);else{if(a&&!j(a))throw new TypeError("Options must be null or an object");o(this,a)}return this}});